<VirtualHost *:80>
    ServerName stoyandimov.com
    ServerAlias www.stoyandimov.com

    # Redirect to HTTPs for session requests
    Redirect permanent /Account/Login https://stoyandimov.com/Account/Login

    # Proxy modules config
    ProxyPreserveHost On
    ProxyPass / http://webapp:80/
    ProxyPassReverse / http://webapp:80/

    # Log config
    ErrorLog /var/log/apache2/scho-dot-com-error.log
    CustomLog /var/log/apache2/scho-dot-com-access.log common
</VirtualHost>

<VirtualHost *:443>
    ServerName stoyandimov.com
    ServerAlias www.stoyandimov.com

    # Proxy modules config
    ProxyPreserveHost On
    ProxyPass / http://webapp:80/
    ProxyPassReverse / http://webapp:80/

    # Log config
    ErrorLog /var/log/apache2/scho-dot-com-error.log
    CustomLog /var/log/apache2/scho-dot-com-access.log common

    # SSL config
    SSLEngine on
    SSLCertificateFile        /etc/ssl/certs/stoyandimov.com.crt
    SSLCertificateKeyFile     /etc/ssl/private/stoyandimov.com.key
    SSLCertificateChainFile   /etc/ssl/certs/stoyandimov.com.chain.crt
</VirtualHost>
